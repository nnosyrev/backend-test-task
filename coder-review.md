- мне в принципе нравится идея на один action заводить отдельный класс (аля паттерн ADR https://api-platform.com/docs/symfony/controllers/), но для простового тестового задания пусть будет старый добрый MVC.
- мне не нравится в ProductController идея получения категории путём самостоятельного разбора request-a. Пусть это делает фреймворк. А категория пусть будет указана в роуте.
- мне не нравится идея самостоятельной работы с json и response-ами (тем более что это сделано как то очень странно - запись в поток происходит еще в контроллере до возврата response-а из контроллера). Пусть это делает фреймворк.
- в методе получения корзины всегда возвращается 404.
- мне не нравится то что из ProductsView (из вьюхи) идёт обращение к репозиторию. По факту это нарушение MVC. Сделаем получение списка товаров по человечески в контроллере.
- при поиске товаров по категории из БД запрашиваем только id, а в коде используем и другие столбцы.
- в ProductRepository оба метода с SQL иньекциями (и похоже в запросах одинарные кавычки пропущены).
- папке Entity не место в папке Repository
